<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XANH LC - B·∫£n ƒë·ªì Realtime Traffic & ƒê·∫∑t xe</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <link rel="stylesheet" href="css\style.css">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2 style="margin-top: 0; color: var(--primary-darker); text-align: center;">XANH LC</h2>
            
            <div class="control-group">
                <h3>1. Ch·ªçn chuy·∫øn ƒëi</h3>
                <div class="vehicle-selector">
                    <input type="radio" name="vehicle" id="motorbike" value="motorbike" checked onchange="setVehicleType('motorbike')">
                    <label for="motorbike">üèçÔ∏è Xe m√°y</label>
                    <input type="radio" name="vehicle" id="car" value="car" onchange="setVehicleType('car')">
                    <label for="car">üöó √î t√¥</label>
                </div>
                <div>
                    <input type="text" class="form-control" id="startLocation" placeholder="üìç ƒêi·ªÉm xu·∫•t ph√°t...">
                    <input type="text" class="form-control" id="endLocation" placeholder="üèÅ ƒêi·ªÉm ƒë·∫øn...">
                    <button class="btn btn-primary" onclick="findRouteByAddress()">T√¨m ƒë∆∞·ªùng & ∆Ø·ªõc t√≠nh gi√°</button>
                </div>
            </div>
            
            <div id="trip-details-card" class="control-group" style="display: none;">
                <h3>2. Chi ti·∫øt chuy·∫øn ƒëi</h3>
                <div id="routeInfo"></div>
                <div id="booking-section" style="margin-top: 15px;">
                    <div id="payment-options">
                        <strong>Ch·ªçn h√¨nh th·ª©c thanh to√°n:</strong>
                        <div class="payment-methods">
                           <label>
                               <input type="radio" name="payment" value="cash" checked onchange="handlePaymentSelection(this.value)">
                               <div><span class="icon">üíµ</span><br>Ti·ªÅn m·∫∑t</div>
                           </label>
                           <label>
                               <input type="radio" name="payment" value="wallet" onchange="handlePaymentSelection(this.value)">
                                <div><span class="icon">üì±</span><br>V√≠ ƒëi·ªán t·ª≠</div>
                           </label>
                           <label>
                               <input type="radio" name="payment" value="card" onchange="handlePaymentSelection(this.value)">
                                <div><span class="icon">üí≥</span><br>Th·∫ª</div>
                           </label>
                        </div>
                        <div id="payment-details" style="display:none;">
                            <div id="card-form" style="display:none;">
                                <input type="text" id="card-number" class="form-control" placeholder="S·ªë th·∫ª">
                                <div class="card-form-group">
                                    <input type="text" id="card-expiry" class="form-control" placeholder="MM/YY">
                                    <input type="text" id="card-cvv" class="form-control" placeholder="CVV">
                                </div>
                            </div>
                            <div id="wallet-qr" style="display:none; text-align:center;">
                                <img src="assets\qr.jpg" alt="QR Code" width="150">
                            </div>
                        </div>
                    </div>
                    <button id="bookBtn" class="btn btn-success" onclick="handleBookingClick()">‚úÖ ƒê·∫∑t Xe Ngay</button>
                    <div id="initialBookingStatus" class="booking-status" style="display: none; margin-top: 10px;"></div>
                </div>
            </div>
            
            <div id="driver-info-card" class="control-group" style="display: none;">
                <h3>3. T√†i x·∫ø & Tr·∫°ng th√°i</h3>
                <div class="driver-details">
                    <div class="driver-name" id="driver-name-display"></div>
                    <div class="vehicle-info" id="vehicle-info-display"></div>
                </div>
                <div id="trip-status-display" class="booking-status"></div>
                <button id="cancelBtn" class="btn btn-danger" onclick="clearAll()" style="margin-top: 15px;">‚õî H·ªßy Chuy·∫øn</button>
            </div>

            <div class="control-group">
                <h3>Ti·ªán √çch</h3>
                <button class="btn btn-warning" onclick="refreshTraffic()">C·∫≠p nh·∫≠t giao th√¥ng</button>
                <button class="btn btn-danger" onclick="clearAll()" style="margin-top: 10px;">ƒê·∫∑t l·∫°i</button>
            </div>
        </div>

        <div class="map-container">
            <div id="map"></div>
        </div>
    </div>
    
    <div id="rating-modal">
        <div class="rating-box">
            <h3>ƒê√°nh gi√° chuy·∫øn ƒëi</h3>
            <p>Vui l√≤ng ƒë√°nh gi√° t√†i x·∫ø <b id="driver-name-rating"></b></p>
            <div class="rating-stars" id="rating-stars-container">
                <span data-value="1">‚òÖ</span><span data-value="2">‚òÖ</span><span data-value="3">‚òÖ</span><span data-value="4">‚òÖ</span><span data-value="5">‚òÖ</span>
            </div>
            <button class="btn btn-success" onclick="submitRating()">G·ª≠i ƒê√°nh Gi√°</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="js\config.js"></script>
    <script src="js\utils.js"></script>
    <script src="js\map.js"></script>
    <script src="js\booking.js"></script>
    <script src="js\app.js"></script>
</body>
</html>